machine:
  node:
    version: 6.9.1
dependencies:
  override:
    - npm install
test:
  override:
    - if [[ ! -z $CI_PULL_REQUEST ]] ; then npm run test-pr; fi
    - if [[   -z $CI_PULL_REQUEST ]] ; then npm run test-master; fi

deployment:
  production:
    branch: master
    commands:
      - NODE_ENV=production npm run deploy-master
